<!DOCTYPE html>
<html>
    <head>
        <title>ws chat room</title>
    </head>
    <body>
        name:<input id="nameInput">
        <button id="loginBtn">登录</button>
        <button id="logoutBtn">注销</button>
        <div id="chatContent"></div>
    </body>
</html>
<script>

let ws = null;

loginBtn.addEventListener('click',(e=> {
    console.log(nameInput.value);
}))
logoutBtn.addEventListener('click', ()=> ws.close());

function openWebsocket(name) {
    ws = new WebSocket('ws://localhost:9990', 'chat');
    ws.onopen(e=> {
        ws.send(JSON.stringify({name: name}));
    });
    ws.onmessage(e=> {
        console.log(JSON.parse(e.data));
    });
    ws.onclose(e=> console.log('[logout] success'));
}
</script>